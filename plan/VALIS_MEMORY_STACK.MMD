graph TD
  Router[MemoryRouter]
  Core[Core Persona Memory (Static JSON)]
  Canon[Canonized Identity Memory (Immutable)]
  Profile[Client Profile Memory (per-user)]
  General[Working Memory (Rotating)]
  Session[Session Memory (In-Memory)]

  Router --> Core
  Router --> Canon
  Router --> Profile
  Router --> General
  Router --> Session

  Router -->|Structured JSON| Engine[VALISEngine]
